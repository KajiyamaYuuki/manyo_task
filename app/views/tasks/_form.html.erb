<%= flash[:alert] %>

<%= form_with(model: @task, local: true) do |f| %>
    <% if @task.errors.any? %>
      <% @task.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    <% end %>
  <div class="field">
    <p><%= f.label :title, "タスク名" %>
    <%= f.text_field :title %></p>
    <p><%= f.label :content, "詳細" %>
    <%= f.text_field :content %></p>
    <p><%= f.label :expired_at, "終了期限" %>
    <%= f.datetime_field :expired_at %></p>
    <p><%= f.label :status, "ステータス" %>
    <%= f.select :status, [["選択してください", "選択なし"],["未着手", "未着手"], ["着手中", "着手中"], ["完了", "完了"]] %></p>
    <p><%= f.label :priority, "優先度" %>
    <%= f.select :priority, options_for_select(Task.priorities) %></p>
    <p><%= f.label :label, "ラベル" %>
    <% Label.all.each do |label| %>
      <% if action_name == 'new' || action_name == 'create' %>
        <%= f.check_box :label_ids, { multiple: true, checked: label[:checked], disabled: label[:disabled], include_hidden: false}, label[:id], "" %>
        <label><%= f.label :label_ids, label.name, value: label[:id] %></label>
      <% elsif action_name == 'edit' || action_name == 'update' %>
        <%= f.check_box :label_ids, { multiple: true, checked: @task.label_ids.include?(label.id), disabled: label[:disabled], include_hidden: false}, label[:id], "" %>
        <label><%= f.label :label_ids, label.name, value: label[:id] %></label>
      <% end %>
    <% end %></p>
  </div>
    <%= f.submit button_text, class: "btn btn-primary" %>
<% end %>
<br>
